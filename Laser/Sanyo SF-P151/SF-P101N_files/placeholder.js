var placeholder=(function(){var _isplaceholder="placeholder" in document.createElement("input"),_label=null,_labelId="";function initialize(el){if(!el.getAttribute("placeholder")){return}_labelId=el.id;if(!_labelId){_labelId="placeholder_"+new Date().getTime();el.id=_labelId}_label=_createLabel(el);el.parentNode.insertBefore(_label,el);_bindEvent(el);if(el.value===""){_label.innerHTML=el.getAttribute("placeholder")}}function _bindEvent(el){el.onfocus=(function(){var _lb=_label;return function(){_focusEvent.call(this,_lb)}}());el.onblur=(function(){var _lb=_label;return function(){_blurEvent.call(this,_lb,this.getAttribute("placeholder"))}}())}function _createLabel(el){var _lb,_top;_lb=document.createElement("label");_lb.htmlFor=_labelId;_top=window.getComputedStyle?getComputedStyle(el,null).paddingTop:el.currentStyle.paddingTop;_lb.style.cssText="position:absolute; margin:"+_top+" 0 0 3px; color:#BBB; cursor:text";return _lb}function _focusEvent(lb){lb.innerHTML=""}function _blurEvent(lb,pltext){if(this.value===""){lb.innerHTML=pltext}}function _setPlaceholder(el,con){el.setAttribute("placeholder",con);if(!_isplaceholder&&el.value===""){this.innerHTML=con}}return function(el){var _lb;if(!_isplaceholder){initialize(el);_lb=_label}this.setPlaceholder=function(con){return(function(){_setPlaceholder.call(_lb,el,con)}())}}}());var pasteTextExceedMaxLength=function(){var cutlength=2;var bounded=[];var search=function(el){var ret=null;for(var i=0;i<bounded.length;i++){if(bounded[i]===el){ret=bounded[i];break}}return ret};var MAX_VALUE=9999;var counter=function(txt){return txt.length};var checkr=function(txt,max){return _pasteTextExceedMaxLength.counter(txt)>=max};var cutText=function(target,txt,max){target.value=txt.substring(0,max)};var detectExceedAndExcuteCallback=function(txt,maxLen,success,error){if(_pasteTextExceedMaxLength.checkr(txt,maxLen)){error(txt)}else{success(txt)}};var pasteHdl=function(e,success,error){e=e||window.event;e.stopPropagation?e.stopPropagation():e.cancelBubble=true;var target=e.target||e.srcElement;var clipText="";if((target.maxLength||parseInt(target.getAttribute("maxlength"))||0)>=MAX_VALUE){return}var oldValue=target.value;target.originalMaxLength=(target.maxLength||parseInt(target.getAttribute("maxlength"))||0);target.maxLength=MAX_VALUE;setTimeout(function(){detectExceedAndExcuteCallback(target.value,target.originalMaxLength,success,function(txt){pasteTextExceedMaxLength.cutText(target,txt,target.originalMaxLength);error(txt)});target.maxLength=target.originalMaxLength},1)};var opera=/opera/i.test(window.navigator.userAgent);var inputHdl=function(e,success,error){if((this.maxLength||parseInt(this.getAttribute("maxlength"))||0)>=MAX_VALUE){return}if((opera||(!opera&&!((e.ctrlKey&&e.keyCode===86&&!e.shiftKey&&!e.altKey))))&&!((e.ctrlKey&&e.keyCode===65&&!e.shiftKey&&!e.altKey))&&!((e.ctrlKey&&e.keyCode===67&&!e.shiftKey&&!e.altKey))&&!(e.ctrlKey&&e.keyCode===32&&!e.shiftKey&&!e.altKey)&&!(e.shiftKey&&e.keyCode===32&&!e.ctrl&&!e.altKey)&&",9,20,16,17,18,27,112,113,114,115,116,117,118,119,120,121,122,123,44,145,19,45,36,33,35,34,144,38,40,37,39,45,35,40,34,37,12,39,36,38,33,46,".indexOf(","+e.keyCode+",")===-1){var max=this.originalMaxLength||(this.maxLength||parseInt(this.getAttribute("maxlength"))||0);if(_pasteTextExceedMaxLength.checkr(this.value,max)){pasteTextExceedMaxLength.cutText(this,this.value,max);error.call(this,this.value)}else{success.call(this,this.value)}}};var _pasteTextExceedMaxLength=function(el,success,error,maxlen){if(search(el)){return}else{bounded.push(el)}if(typeof maxlen==="number"&&maxlen>=0){maxlen=parseInt(maxlen);el.maxLength=maxlen}el.addEventListener?el.addEventListener("paste",function(e){pasteHdl.call(e.target,e,success,error)},false):el.attachEvent("onpaste",function(e){pasteHdl.call(window.event.srcElement,window.event,success,error)});el.addEventListener?el.addEventListener("keyup",function(e){inputHdl.call(e.target,e,success,error)},false):el.attachEvent("onkeyup",function(e){inputHdl.call(window.event.srcElement,window.event,success,error)})};_pasteTextExceedMaxLength.checkr=checkr;_pasteTextExceedMaxLength.counter=counter;_pasteTextExceedMaxLength.cutText=cutText;return _pasteTextExceedMaxLength}.call(this);