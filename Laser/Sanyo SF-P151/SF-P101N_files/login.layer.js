jQuery(function(){var noop=function(){};var dialog;var addParams=function(url,params){if(url.indexOf("?")!==-1){url=url.split("?");if(url[1]){url[1]=url[1]+"&"+params.join("&")}else{url[1]=params.join("&")}url=url.join("?")}else{if(url.indexOf("#")!==-1){url=url.splig("#");url[1]="?"+params.join("&");url=url.join("#")}else{url+=("?"+params.join("&"))}}return url};var CALLBACK_NAME="LOGON_CALLBACK_"+new Date().valueOf();var config={style:{ifrWidth:560,ifrHeight:345,width:340,height:"auto"},text:{title:"Login",close:""},url:"",callback:noop};var singleton=null;var Login=function(cfg){if(singleton){return singleton}singleton=this;this._={};this.elems={};this.config=jQuery.extend(true,{},config,cfg);this.init()};Login.prototype={init:function(){var elems=this.elems;var cfg=this.config},load:function(url,next){this.unload();window[CALLBACK_NAME]=this.config.callback;var params=[];if(document.domain!==window.location.hostname){params.push("domain="+document.domain)}params.push("callback="+CALLBACK_NAME);next=addParams(next,params);url=addParams(url,["forwardPage="+encodeURIComponent(next)]);dialog=art.dialog({title:"SIGN IN",id:"loginDialog",lock:true,content:'<iframe src="'+url+'" frameborder="0" style="width:'+this.config.style.ifrWidth+"px; height:"+this.config.style.ifrHeight+'px"></iframe>'})},unload:function(){if(dialog){dialog.close()}window[CALLBACK_NAME]=noop}};window.LoginLayer2=Login});